<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="descripition" content="A simple note web provide TFcis members to note everything about programm">
        <meta name="keywords" content="tnw, ton, TFcisNoteWebSite, 筆記網站">
        <meta name="author" content="arashi">
        <meta name="coptright" content="Copyright © TFcis. All rights reserved">
        <title>{$system_name}</title>
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="Shortcut Icon" type="image/x-icon" href="img/icon.png"/>
        <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
        <link rel="stylesheet" href="plugin/fontawesome/css/all.min.css">
        <link rel="stylesheet" href="style.css">
        <script src="plugin/jquery.min.js"></script>
        <script src="plugin/popper.min.js"></script>
        <script src="bootstrap/js/bootstrap.min.js"></script>
    </head>
    <body>
        <nav class="navbar navbar-expand-lg navbar-dark fixed-top" id="head_pill" style="margin-bottom:20px;">
            <a class="navbar-brand" href="index.php" id="home">TFcisNoteWebSite</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar" aria-controls="navbar"aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbar">
                <ul class="nav navbar-nav navbar-left">
                    <li class="nav-item active">
                        <a class="nav-link" href="class.php?op=class_list">類別類表</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="index.php?op=history">更新歷史</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="index.php?op=page_index">索引列表</a>
                    </li>
                    {if $is_user}
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="navbar_dropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                功能列表
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbar_dropdown">
                                <a class="dropdown-item" href="index.php?op=post_list">回到主頁</a>
                                <a class="dropdown-item" href="user.php?op=user_form&user_sn={$user_detail.user_sn}">修改資料</a>
                                <a class="dropdown-item" href="class.php?op=class_list">類別類表</a>
                            </div>
                        </li>
                    {/if}
                    {if $is_admin}
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="navbar_dropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                網站管理
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbar_dropdown">
                                <a class="dropdown-item" href="user.php?op=user_list">使用者列表</a>
                                <a class="dropdown-item" href="post.php?op=post_create">發布文章</a>
                                <a class="dropdown-item" href="post.php?op=my_post&user_sn={$now_user_sn}">我的文章</a>
                                <a class="dropdown-item" href="class.php?op=class_create">新增類別</a>
                                <a class="dropdown-item" href="class.php?op=class_function">修改類別</a>
                            </div>
                        </li>
                    {/if}
                    {if $is_top}
                        <li class="nav-item">
                            <a class="nav-link" href="webset.php?op=web_setting">網站全域</a>
                        </li>
                    {/if}
                </ul>
                <ul class="navbar-nav ml-auto">
                    <form class="form-inline my-2 my-lg-0" action="post.php" method="POST" role="form">
                        <div class="input-group">
                            <input type="hidden" name="op" value="search_result">
                            <input name="keyword" type="text" class="form-control" placeholder="請輸入關鍵字" style="background-color: rgba(0, 0, 0, 0.7);color: white;">
                            <span class="input-group-append">
                                <button class="btn btn-outline-warning" type="submit">搜尋</button>
                            </span>
                        </div>
                    </form>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    {if $is_user}
                        <a href="user.php?op=user_logout" class="btn btn-block btn-danger col-md-2">登出</a>
                    {else}
                        <span>
                            <div class="row">
                                <div>
                                    <a href="user.php?op=user_login_page" class="btn btn-block btn-primary">登入</a>
                                </div>
                                &nbsp;&nbsp;
                                <div>                            
                                    <a href="user.php?op=user_register" class="btn btn-block btn-warning">註冊</a>
                                </div>
                                &nbsp;&nbsp;
                            </div>
                        </span>
                    {/if}
                </ul>
            </div>
        </nav>
        <br>
        <br>
        <br>
        <div class="container">
            <div class="col-md-12">
                {if $op=='post_list'}
                    <div class="col-md-12" style="margin-top: 20px;display: flex;">
                        {include file='post_list.html'}
                    </div>
                {else if $op=='class_display'}
                    <div class="col-md-12" style="margin-top: 20px;display: flex;">
                        {include file='class_display.html'}
                    </div>
                {else if $op=='find_tag'}
                    <div class="col-md-12" style="margin-top: 20px">
                        {include file='find_tag.html'}
                    </div>
                {else}
                    <div class="col-md-7" id="system_main" style="margin:0px auto;">
                        {if $op=='history'}
                            {include file='history.html'}
                        {else if $op=='user_register'}
                            {include file='user_register.html'}
                        {else if $op=='user_form'}
                            {include file='user_form.html'}
                        {else if $op=='user_list'}
                            {include file='user_list.html'}
                        {else if $op=='user_login_page'}
                            {include file='user_login_page.html'}
                        {else if $op=="my_post"}
                            {include file='my_post.html'}
                        {else if $op=="post_create"}
                            {include file='post_create.html'}
                        {else if $op=='post_display'}
                            {include file='post_display.html'}
                        {else if $op=='post_form'}
                            {include file='post_form.html'}
                        {else if $op=='add_tag'}
                            {include file='add_tag.html'}
                        {else if $op=='cmt_form'}
                            {include file='cmt_form.html'}
                        {else if $op=="search_result"}
                            {include file='search_result.html'}
                        {else if $op=="web_setting"}
                            {include file='web_setting.html'}
                        {else if $op=="webset_bg"}
                            {include file="webset_bg.html"}
                        {else if $op=='tag_list'}
                            {include file='tag_list.html'}
                        {else if $op=='class_create'}
                            {include file='class_create.html'}
                        {else if $op=='class_list'}
                            {include file='class_list.html'}
                        {else if $op=='class_function'}
                            {include file='class_function.html'}
                        {else if $op=='page_index'}
                            {include file='page_index.html'}
                        {else if $op=='webset_show_log'}
                            {include file='webset_show_log.html'}
                        {else if $op=='webset_show_top'}
                            {include file='webset_show_top.html'}
                        {/if}
                    </div>
                {/if}
            </div>
        </div>
    </body>
    <script>

        $(function () {
            $("[data-toggle='tooltip']").tooltip();
        });

        var height = $(window).height();
        $(".container").css("min-height", height);

        var target = 0;
        $(window).keydown(function(event) {
            var key = event.which;
            var judge = false;
            if (target == 12) {
                anone();
            } else {
                switch (key) {
                    case 38:
                        if (target == 0) {
                            target = 1;
                        } else if (target == 1) {
                            target = 2;
                        } else {
                            target = 0;
                        }
                        break;

                    case 40:
                        if (target == 2) {
                            target = 3;
                        } else if (target == 3) {
                            target = 4;
                        } else {
                            target = 0;
                        }
                        break;

                    case 37:
                        if (target == 4) {
                            target = 5;
                        } else if (target == 6) {
                            target = 7;
                        } else {
                            target = 0;
                        }
                        break;

                    case 39:
                        if (target == 5) {
                            target = 6;
                        } else if (target == 7) {
                            target = 8;
                        } else {
                            target = 0;
                        }
                        break;

                    case 66:
                            if (target == 8) {
                                target = 9;
                            } else if (target == 10) {
                                target = 11;
                            } else if (target < 12) {
                                target = 0;
                            }
                            break;

                    case 65:
                        if (target == 9) {
                            target = 10;
                        } else if (target == 11) {
                            target = 12;
                            anone();
                        } else if (target < 12) {
                            target = 0;
                        } else if (target == 12) {
                            anone();
                        }
                        break;
                    
                    default:
                        target = 0;
                        break;
                }
            }
        });
        function anone () {
            $(".anone").css("display", "block");
            d = document; 
            s = d.createElement('script'); 
            s.src = 'plugin/anone.js'; 
            b = d.getElementsByTagName('body')[0]; 
            b.appendChild(s);
        }
    </script>
</html>